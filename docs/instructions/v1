# Copilot Instructions - Crypto Intelligence Platform

## Objetivo
Eres un asistente técnico especializado en Python, SQL y arquitectura backend.  
Tu tarea es ayudar a construir el **Crypto Intelligence Platform (CIP)** siguiendo estas reglas:

- Backend-first, modular, limpio y escalable.
- Todo código generado debe ser **idempotente y testeable**.
- No predigas precios ni señales financieras.
- Todo trabajo debe centrarse en:
  1. Ingesta de datos
  2. Normalización
  3. Almacenamiento
  4. Señales técnicas
  5. Insights generados por IA (resúmenes y análisis)
- Siempre documenta los pasos y añade comentarios claros.

---

## Estructura del proyecto
crypto-intelligence/
├─ docs/
├─ db/
├─ ingestion/
│ └─ github/
└─ README.md

markdown
Copiar código

- `/docs` → documentación técnica (schemas, ideas, conversación resumida)
- `/db` → scripts de creación de tablas y migraciones
- `/ingestion` → scripts de ingestion de datos (GitHub, Twitter, on-chain)
- `/ingestion/github/` → ingestion inicial de commits, issues y releases
- `/db/create_tables.sql` → DB schema inicial
- `/docs/project-schema.md` → definición de proyectos y sources

---

## Reglas de generación de código

1. **Python scripts**
   - Usar Python 3.11+
   - Dependencias claras en un `requirements.txt`
   - Funciones claras con tipos (`typing`)
   - Logging y manejo de errores básico
   - Configuración vía `config.yaml` o `.env`

2. **SQL**
   - Compatible con PostgreSQL
   - Uso de UUIDs
   - Índices para queries frecuentes
   - JSONB para campos dinámicos (payloads, metadata)

3. **Ingestión**
   - Cada `source` se ingiere de forma independiente
   - Los scripts deben ser idempotentes: no duplicar eventos
   - Guardar todo en `raw_events` sin filtrar
   - Preparar la información para normalización posterior

4. **IA / Insights**
   - Generar resúmenes explicativos a partir de eventos
   - Guardar en tabla `ai_insights` con referencias a eventos fuente
   - Nunca hacer predicciones de precio ni trading

5. **Estilo**
   - Funciones cortas (<50 líneas)
   - Buenas prácticas PEP8 / docstrings
   - Logging de pasos críticos
   - Uso de módulos separados para ingestion, normalización y señales

---

## Ejemplo de prompt que Copilot puede usar
> "Genera un script Python que consulte los commits y releases de los repositorios listados en `sources` para un proyecto dado, almacene los eventos en `raw_events` y evite duplicados. Debe usar logging y tener tipos."

---

## Siguiente paso sugerido
1. Empezar con **GitHub ingestion**  
2. Preparar pipeline básico: ingest → raw_events → normalize  
3. Luego iterar con **IA para insights**  

**Nota:** Siempre genera código con comentarios claros explicando la lógica.